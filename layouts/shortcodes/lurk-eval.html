{{ if not (.Page.Scratch.Get "lurk-eval") }}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<link rel="stylesheet" href="{{ "lurk/css/lurk.css"  }}" type="text/css" media="all">
<link rel="stylesheet" href="{{ "lurk/highlight-lisp/themes/github.css"  | relURL }}" type="text/css" media="all">

<script type="text/javascript" src="{{ "lurk/highlight-lisp/highlight-lisp.js" | relURL }}"></script>
<script type="module" src="{{ "lurk/js_wasm-worker_js.js" | relURL }}"></script>
<script type="module" src="{{ "lurk/index.js" | relURL }}"></script>
<script src="{{ "lurk-eval/index.js"  | relURL  }}"></script>

<style>
  .terminal {
    width: 100%;
    height: 150px;
    padding: 12px 20px;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    background-color: #000000;
    font-size: 12px;
    font-family: "Lucida Console", Monaco, monospace;
    resize: none;
  }
  .output {
    width: 100%;
    height: 50px;
    padding: 12px 20px;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    colors: #ffffff;
    background-color: #ffffff;
    font-size: 12px;
    font-family: "Lucida Console", Monaco, monospace;
    resize: none;
  }
</style>

<script type="text/javascript">
  function reset() {
    var original = {{ .Inner | .Page.RenderString }}
    var copyText = document.getElementById("input");
    copyText.value = original;
  }
  function copy() {
    /* Get the text field */
    var copyText = document.getElementById("input");
    /* Select the text field */
    copyText.select();
    copyText.setSelectionRange(0, 99999); /* For mobile devices */

    /* Copy the text inside the text field */
    navigator.clipboard.writeText(copyText.value);
    navigator.clipboard.writeText(copyText.value).then(() => {
      alert("Copied the code to clipboard");
    });
  }

</script>

<div class="lurk-code-component">
  <div class="lurk-code-component" style="float:right;">
    <button id="reset" class="button" onclick="reset()">Reset</button>
    <button id="run" class="button">Run</button>
    <button id="copy" class="button" onclick="copy()">Copy</button>
  </div>
  <textarea class="terminal" id="input">{{ .Inner | .Page.RenderString }}</textarea>
  <textarea class="output" id="output"></textarea>
  <br/>
  <span id="status" style="display:none;"> n/a </span>
  <br/>
</div>
{{ .Page.Scratch.Set "lurk-eval" true }}
{{ end }}